<!--
  Expects the following local variables:

  * entry
  * entries
  * index
  * with_member (boolean)
  * with_date (boolean)
-->

<% grid_columns = 2 + (with_member ? 1 : 0) + (with_date ? 1 : 0) %>
<div class="left-aligned-grid-<%= grid_columns %>">

  <% if with_date %>
    <div class="left">
      <% if index == 0 || entry.day != entries[index - 1].day %>
        <h3 style="margin-top: -0.25rem;">
          <%= link_to entry.day.date.to_s, "/days?date=#{entry.day.date.iso8601}", method: :get, class: "camouflage" %>
        </h3>
      <% end %>
    </div>
  <% end %>

  <% if with_member %>
    <div class="left">
      <% if index == 0 || entry.member != entries[index - 1].member %>
        <h3 style="margin-top: -0.25rem;">
          <%= link_to entry.member.name, "/days?member_id=#{entry.member_id}", method: :get, class: "camouflage" %>
        </h3>
      <% end %>
    </div>
  <% end %>

  <div class="left">
    <%= entry.log %>
  </div>

  <div class="right">
    <%= link_to "todo", "", method: nil, role: "button", class: "slim #{entry.todo? ? 'btn-todo' : 'btn-inactive'}" %>
    <%= link_to "doing", "", method: nil, role: "button", class: "slim #{entry.doing? ? 'btn-doing' : 'btn-inactive'}" %>
    <%= link_to "done", "", method: nil, role: "button", class: "slim #{entry.done? ? 'btn-done' : 'btn-inactive'}" %>
  </div>

</div>
